{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../config/index.css\";import{getRankText,formatAmount}from\"../utils/textUtils\";import createAxiosInstance from\"../config/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeeSettings=()=>{const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchEmployee=async()=>{try{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nconst response=await axiosInstance.get(\"/employees/admin/setting\");setEmployees(response.data);setLoading(false);}catch(err){setError(\"유저 정보를 불러오지 못했습니다.\");setLoading(false);console.error(err);// 에러 로깅\n}};fetchEmployee();},[]);const handleAmountChange=(index,value)=>{const updatedEmployees=[...employees];const numericValue=value.replace(/[^0-9]/g,\"\");updatedEmployees[index].monthlyAmount=Number(numericValue);setEmployees(updatedEmployees);};const handleSave=async()=>{try{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nawait axiosInstance.put(\"/employees/admin/setting\",employees);alert(\"적립금이 업데이트 되었습니다.\");}catch(err){alert(\"다시 한번 확인해 주세요. \"+err.message);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"WEAVUS \\uAD00\\uB9AC\\uC790 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uC9C1\\uAE09\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uD604\\uC7AC \\uC6D4 \\uC801\\uB9BD \\uAE08\\uC561\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees.map((employee,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:getRankText(employee.rank)}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:formatAmount(employee.monthlyAmount),onChange:e=>handleAmountChange(index,e.target.value)})})]},index))})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"save-button\",onClick:handleSave,children:[\"\\uC801\\uB9BD\\uAE08 \",\"\",\"\\uC5C5\\uB370\\uC774\\uD2B8\"]})]});};export default EmployeeSettings;","map":{"version":3,"names":["React","useEffect","useState","getRankText","formatAmount","createAxiosInstance","jsx","_jsx","jsxs","_jsxs","EmployeeSettings","employees","setEmployees","loading","setLoading","error","setError","fetchEmployee","axiosInstance","response","get","data","err","console","handleAmountChange","index","value","updatedEmployees","numericValue","replace","monthlyAmount","Number","handleSave","put","alert","message","className","children","map","employee","rank","type","onChange","e","target","onClick"],"sources":["C:/Users/user/Desktop/react/src/pages/Admin.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"../config/index.css\";\r\nimport { getRankText, formatAmount } from \"../utils/textUtils\";\r\nimport createAxiosInstance from \"../config/api\";\r\n\r\nconst EmployeeSettings = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchEmployee = async () => {\r\n      try {\r\n        const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n        const response = await axiosInstance.get(\"/employees/admin/setting\");\r\n        setEmployees(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(\"유저 정보를 불러오지 못했습니다.\");\r\n        setLoading(false);\r\n        console.error(err); // 에러 로깅\r\n      }\r\n    };\r\n    fetchEmployee();\r\n  }, []);\r\n\r\n  const handleAmountChange = (index, value) => {\r\n    const updatedEmployees = [...employees];\r\n    const numericValue = value.replace(/[^0-9]/g, \"\");\r\n    updatedEmployees[index].monthlyAmount = Number(numericValue);\r\n    setEmployees(updatedEmployees);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n      await axiosInstance.put(\"/employees/admin/setting\", employees);\r\n      alert(\"적립금이 업데이트 되었습니다.\");\r\n    } catch (err) {\r\n      alert(\"다시 한번 확인해 주세요. \" + err.message);\r\n    }\r\n  };\r\n\r\n  if (loading) return <div className=\"loading\">Loading...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  return (\r\n    <div className=\"detail-container\">\r\n      <h1 className=\"title\">WEAVUS 관리자 페이지</h1>\r\n        <table className=\"table\">\r\n        <thead>\r\n          <tr>\r\n            <th>직급</th>\r\n            <th>현재 월 적립 금액</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {employees.map((employee, index) => (\r\n            <tr key={index}>\r\n              <td>{getRankText(employee.rank)}</td>\r\n              <td>\r\n                <input\r\n                  type=\"text\"\r\n                  className=\"input\"\r\n                  value={formatAmount(employee.monthlyAmount)}\r\n                  onChange={(e) => handleAmountChange(index, e.target.value)}\r\n                />\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <button className=\"save-button\" onClick={handleSave}>\r\n        적립금 {\"\"}\r\n        업데이트\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmployeeSettings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}