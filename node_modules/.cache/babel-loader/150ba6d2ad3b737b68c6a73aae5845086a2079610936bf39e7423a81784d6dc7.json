{"ast":null,"code":"import React from\"react\";import{useNavigate}from\"react-router-dom\";import{useState,useEffect}from\"react\";import\"../../config/index.css\";import createAxiosInstance from\"../../config/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PersonnelDashboard(){const navigate=useNavigate();const[data,setData]=useState([]);const[error,setError]=useState(\"\");const[loading,setLoading]=useState(false);const[isFetched,setIsFetched]=useState(false);useEffect(()=>{const fetchData=async()=>{if(isFetched)return;// 이미 호출된 경우 중단\nsetLoading(true);// 로딩 시작\ntry{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nconst response=await axiosInstance.get(\"/personnel/applicant/list\");if(Array.isArray(response.data)){setData(response.data);}else{setError(\"서버에서 받은 데이터 형식이 올바르지 않습니다.\");}setIsFetched(true);// 데이터 로드 완료\n}catch(error){if(error.response){console.error(\"서버 에러:\",error.response.status,error.response.data);setError(\"서버 오류가 발생했습니다.\");}else if(error.request){console.error(\"응답 없음:\",error.request);setError(\"서버로부터 응답이 없습니다.\");}else{console.error(\"요청 설정 에러:\",error.message);setError(\"요청에 문제가 발생했습니다.\");}}finally{setLoading(false);// 로딩 종료\n}};fetchData();},[isFetched]);const handleRowClick=()=>{navigate(\"/applicant/applicant/new\");};const handleEmployeeClick=personnelId=>{navigate(\"/personnel/applicant/\".concat(personnelId));// 상세 페이지로 이동\n};//\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"WEAVUS \\uC9C0\\uC6D0\\uC790 \\uB9AC\\uC2A4\\uD2B8\"}),/*#__PURE__*/_jsx(\"button\",{className:\"submit-button\",onClick:()=>handleRowClick(),children:\"\\uC9C0\\uC6D0\\uC790 \\uB4F1\\uB85D\"}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!loading&&!error&&/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uC774\\uB984\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uC131\\uBCC4\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uAD50\\uC721\\uAE30\\uAD00\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uC9C0\\uC6D0 \\uC0C1\\uD0DC\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uC0C1\\uD0DC \\uACBD\\uACFC\\uC77C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.map(applicant=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handleEmployeeClick(applicant.id)// 클릭 시 handleEmployeeClick 함수 호출\n,children:applicant.name})}),/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:applicant.gender}),/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:applicant.institution.name}),/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:applicant.admissionStatus}),/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:applicant.admissionStatus})]},applicant.id))})]})]});}export default PersonnelDashboard;","map":{"version":3,"names":["React","useNavigate","useState","useEffect","createAxiosInstance","jsx","_jsx","jsxs","_jsxs","PersonnelDashboard","navigate","data","setData","error","setError","loading","setLoading","isFetched","setIsFetched","fetchData","axiosInstance","response","get","Array","isArray","console","status","request","message","handleRowClick","handleEmployeeClick","personnelId","concat","className","children","onClick","map","applicant","id","name","gender","institution","admissionStatus"],"sources":["C:/Users/user/Desktop/react/src/personnel/pages/PersonnelDashboard.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useState, useEffect } from \"react\";\r\nimport \"../../config/index.css\";\r\nimport createAxiosInstance from \"../../config/api\";\r\n\r\nfunction PersonnelDashboard() {\r\n  const navigate = useNavigate();\r\n  const [data, setData] = useState([]);\r\n  const [error, setError] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [isFetched, setIsFetched] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      if (isFetched) return; // 이미 호출된 경우 중단\r\n\r\n      setLoading(true); // 로딩 시작\r\n\r\n      try {\r\n        const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n        const response = await axiosInstance.get(\"/personnel/applicant/list\");\r\n        if (Array.isArray(response.data)) {\r\n          setData(response.data);\r\n        } else {\r\n          setError(\"서버에서 받은 데이터 형식이 올바르지 않습니다.\");\r\n        }\r\n        setIsFetched(true); // 데이터 로드 완료\r\n      } catch (error) {\r\n        if (error.response) {\r\n          console.error(\r\n            \"서버 에러:\",\r\n            error.response.status,\r\n            error.response.data\r\n          );\r\n          setError(\"서버 오류가 발생했습니다.\");\r\n        } else if (error.request) {\r\n          console.error(\"응답 없음:\", error.request);\r\n          setError(\"서버로부터 응답이 없습니다.\");\r\n        } else {\r\n          console.error(\"요청 설정 에러:\", error.message);\r\n          setError(\"요청에 문제가 발생했습니다.\");\r\n        }\r\n      } finally {\r\n        setLoading(false); // 로딩 종료\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [isFetched]);\r\n\r\n  const handleRowClick = () => {\r\n    navigate(`/applicant/applicant/new`);\r\n  };\r\n\r\n  const handleEmployeeClick = (personnelId) => {\r\n    navigate(`/personnel/applicant/${personnelId}`); // 상세 페이지로 이동\r\n  };\r\n//\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1 className=\"title\">WEAVUS 지원자 리스트</h1>\r\n      <button className=\"submit-button\" onClick={() => handleRowClick()}>\r\n        지원자 등록\r\n      </button>\r\n      {loading && <div className=\"loading\">Loading...</div>}\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n      {!loading && !error && (\r\n        <table className=\"table\">\r\n          <thead>\r\n            <tr>\r\n              <th className=\"table-header\">이름</th>\r\n              <th className=\"table-header\">성별</th>\r\n              <th className=\"table-header\">교육기관</th>\r\n              <th className=\"table-header\">지원 상태</th>\r\n              <th className=\"table-header\">상태 경과일</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {data.map((applicant) => (\r\n              <tr key={applicant.id}>\r\n                <td className=\"table-data\">\r\n                  <button\r\n                    className=\"action-button\"\r\n                    onClick={() => handleEmployeeClick(applicant.id)} // 클릭 시 handleEmployeeClick 함수 호출\r\n                  >\r\n                    {applicant.name}\r\n                  </button>\r\n                </td>\r\n                <td className=\"table-data\">\r\n                  {applicant.gender}\r\n                </td>\r\n                <td className=\"table-data\">\r\n                  {applicant.institution.name}\r\n                </td>\r\n                <td className=\"table-data\">\r\n                  {applicant.admissionStatus}\r\n                </td>\r\n                <td className=\"table-data\">{applicant.admissionStatus}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PersonnelDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}