{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"../../config/index.css\";import{getRankText,formatAmount}from\"../../utils/textUtils\";import createAxiosInstance from\"../../config/api\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmployeeSettings=()=>{const[employees,setEmployees]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[username,setUsername]=useState(\"\");const[password,setPassword]=useState(\"\");useEffect(()=>{const fetchEmployee=async()=>{try{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nconst response=await axiosInstance.get(\"/employees/admin/setting\");setEmployees(response.data);setLoading(false);}catch(err){setError(\"유저 정보를 불러오지 못했습니다.\");setLoading(false);console.error(err);// 에러 로깅\n}};fetchEmployee();},[]);const handleAmountChange=(index,value)=>{const updatedEmployees=[...employees];const numericValue=value.replace(/[^0-9]/g,\"\");updatedEmployees[index].monthlyAmount=Number(numericValue);setEmployees(updatedEmployees);};const handleSave=async()=>{try{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nawait axiosInstance.put(\"/employees/admin/setting\",employees);alert(\"적립금이 업데이트 되었습니다.\");}catch(err){alert(\"다시 한번 확인해 주세요. \"+err.message);}};// 관리자 계정 저장하는 프로세스 생성\n// 주소는 /api/signup\n// POST 방식으로 데이터를 보내면 됨\n// 데이터는 { username, password } 형식으로 보내면 됨\n// 성공하면 200, 실패하면 400을 반환함\nconst adminSignUp=async()=>{try{const axiosInstance=createAxiosInstance();// 인스턴스 생성\nconst response2=await axiosInstance.post(\"/signup\",{username,password});const{message}=response2.data;alert(message);setPassword(\"\");setUsername(\"\");}catch(err){alert(\"다시 한번 확인해 주세요. \"+err.message);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"WEAVUS \\uAD00\\uB9AC\\uC790 \\uD398\\uC774\\uC9C0\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uC9C1\\uAE09\"}),/*#__PURE__*/_jsx(\"th\",{className:\"table-header\",children:\"\\uD604\\uC7AC \\uC6D4 \\uC801\\uB9BD \\uAE08\\uC561\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:employees.map((employee,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:getRankText(employee.rank)}),/*#__PURE__*/_jsx(\"td\",{className:\"table-data\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"input\",value:formatAmount(employee.monthlyAmount),onChange:e=>handleAmountChange(index,e.target.value)})})]},index))})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"save-button\",onClick:handleSave,children:[\"\\uC801\\uB9BD\\uAE08 \",\"\",\"\\uC5C5\\uB370\\uC774\\uD2B8\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uAD00\\uB9AC\\uC790 \\uACC4\\uC815 \\uC0DD\\uC131\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",className:\"label\",children:\"ID :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,onChange:e=>setUsername(e.target.value),placeholder:\"\\uC544\\uC774\\uB514\",className:\"input\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"label\",children:\"PW :\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"\\uBE44\\uBC00\\uBC88\\uD638\",className:\"input\",required:true}),/*#__PURE__*/_jsx(\"button\",{className:\"save-button\",onClick:adminSignUp,children:\"\\uC0DD\\uC131\"})]})]});};export default EmployeeSettings;","map":{"version":3,"names":["React","useEffect","useState","getRankText","formatAmount","createAxiosInstance","jsx","_jsx","jsxs","_jsxs","EmployeeSettings","employees","setEmployees","loading","setLoading","error","setError","username","setUsername","password","setPassword","fetchEmployee","axiosInstance","response","get","data","err","console","handleAmountChange","index","value","updatedEmployees","numericValue","replace","monthlyAmount","Number","handleSave","put","alert","message","adminSignUp","response2","post","className","children","map","employee","rank","type","onChange","e","target","onClick","htmlFor","placeholder","required"],"sources":["C:/Users/user/Desktop/react/src/calcul/pages/Admin.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"../../config/index.css\";\r\nimport { getRankText, formatAmount } from \"../../utils/textUtils\";\r\nimport createAxiosInstance from \"../../config/api\";\r\n\r\nconst EmployeeSettings = () => {\r\n  const [employees, setEmployees] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const fetchEmployee = async () => {\r\n      try {\r\n        const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n        const response = await axiosInstance.get(\"/employees/admin/setting\");\r\n        setEmployees(response.data);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError(\"유저 정보를 불러오지 못했습니다.\");\r\n        setLoading(false);\r\n        console.error(err); // 에러 로깅\r\n      }\r\n    };\r\n    fetchEmployee();\r\n  }, []);\r\n\r\n  const handleAmountChange = (index, value) => {\r\n    const updatedEmployees = [...employees];\r\n    const numericValue = value.replace(/[^0-9]/g, \"\");\r\n    updatedEmployees[index].monthlyAmount = Number(numericValue);\r\n    setEmployees(updatedEmployees);\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n      await axiosInstance.put(\"/employees/admin/setting\", employees);\r\n      alert(\"적립금이 업데이트 되었습니다.\");\r\n    } catch (err) {\r\n      alert(\"다시 한번 확인해 주세요. \" + err.message);\r\n    }\r\n  };\r\n\r\n  // 관리자 계정 저장하는 프로세스 생성\r\n  // 주소는 /api/signup\r\n    // POST 방식으로 데이터를 보내면 됨\r\n    // 데이터는 { username, password } 형식으로 보내면 됨\r\n    // 성공하면 200, 실패하면 400을 반환함\r\n  const adminSignUp = async () => {\r\n    try {\r\n      const axiosInstance = createAxiosInstance(); // 인스턴스 생성\r\n      const response2 = await axiosInstance.post(\"/signup\", {\r\n        username,\r\n        password,\r\n      });\r\n      const {message} = response2.data;\r\n      alert(message);\r\n      setPassword(\"\");\r\n        setUsername(\"\");\r\n    } catch (err) {\r\n      alert(\"다시 한번 확인해 주세요. \" + err.message);\r\n    }\r\n  }\r\n\r\n\r\n  if (loading) return <div className=\"loading\">Loading...</div>;\r\n  if (error) return <div className=\"error\">{error}</div>;\r\n\r\n  return (\r\n    <div >\r\n      <h1 className=\"title\">WEAVUS 관리자 페이지</h1>\r\n      <div className=\"detail-container\">\r\n        <table className=\"table\">\r\n          <thead>\r\n          <tr>\r\n            <th className=\"table-header\">직급</th>\r\n            <th className=\"table-header\">현재 월 적립 금액</th>\r\n          </tr>\r\n          </thead>\r\n          <tbody>\r\n          {employees.map((employee, index) => (\r\n              <tr key={index}>\r\n                <td className=\"table-data\">{getRankText(employee.rank)}</td>\r\n                <td className=\"table-data\">\r\n                  <input\r\n                      type=\"text\"\r\n                      className=\"input\"\r\n                      value={formatAmount(employee.monthlyAmount)}\r\n                      onChange={(e) => handleAmountChange(index, e.target.value)}\r\n                  />\r\n                </td>\r\n              </tr>\r\n          ))}\r\n          </tbody>\r\n        </table>\r\n        <button className=\"save-button\" onClick={handleSave}>\r\n          적립금 {\"\"}\r\n          업데이트\r\n        </button>\r\n      </div>\r\n      <div className=\"detail-container\">\r\n            <h2>관리자 계정 생성</h2>\r\n          <label htmlFor=\"username\" className=\"label\">\r\n            ID :\r\n          </label>\r\n            <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            placeholder=\"아이디\"\r\n            className=\"input\"\r\n            required\r\n            />\r\n          <label htmlFor=\"password\" className=\"label\">\r\n            PW :\r\n          </label>\r\n            <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            placeholder=\"비밀번호\"\r\n            className=\"input\"\r\n            required\r\n            />\r\n            <button className=\"save-button\" onClick={adminSignUp}>생성</button>\r\n          </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EmployeeSettings;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}